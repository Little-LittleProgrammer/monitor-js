var QMONITORbrowser=function(e){"use strict";const t="qmonitor",r="2.3.5";var n;!function(e){e.Else="else",e.Error="error",e.Warning="warning",e.Info="info",e.Debug="debug",e.Low="low",e.Normal="normal",e.High="high",e.Critical="critical"}(n||(n={}));const o=3e3;function i(e){return function(e){let t=0;if(0==e.length)return t;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}(e)+""}const s=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i;function a(e){const t=e.match(s);return t?{filename:t[2],functionName:t[1]||"",lineno:parseInt(t[3],10)||void 0,colno:parseInt(t[4],10)||void 0}:{}}function c(e){if(!e)return[];const{stack:t}=e;if(!t)return[];const r=[];for(const e of t.split("\n").slice(1)){const t=a(e);t&&r.push(t)}return r.slice(0,10)}const u=Object.prototype.toString;function p(e,t){return u.call(e)===`[object ${t}]`}function l(e){return null!==e&&p(e,"Object")}function m(e){return p(e,"Number")}function d(e){return p(e,"String")}function h(e){return"function"==typeof e}function f(e){return p(e,"RegExp")}function g(e){return e&&Array.isArray(e)}function b(e){return p(e,"Map")}function y(e){return p(e,"Set")}function v(e){return p(e,"Symbol")}function w(e){return"undefined"!=typeof window&&p(e,"Window")}const S="undefined"!=typeof process,D=l("undefined"!=typeof wx?wx:0)&&h("undefined"!=typeof App?App:0);function E(){return!!window.PerformanceObserver}const R=w?window:D?wx:S?process:void 0,T=E();function O(e,t,r,n=!1){e.addEventListener(t,r,n)}function I(e,t,r,n=!1){e.removeEventListener(t,r,n)}function P(e,t){if(e==Window&&"complete"===document.readyState)t();else{const r=()=>{t(),I(e,"load",r,!0)};O(e,"load",r,!0)}}function k(e,t){e.addEventListener("beforeunload",t,!0)}function x(e,t=new Map){if(function(e){let t=!(b(e)||y(e)||g(e)||l(e));return t=t&&!(v(e)||f(e)||h(e)),t}(e))return e;if(h(e))return function(e){const t=/(?<={)(.|\n)+(?=})/m,r=/(?<=\().+(?=\)\s+{)/,n=e.toString();if(e.prototype){const e=r.exec(n),o=t.exec(n);if(o){if(e){const t=e[0].split(",");return new Function(...t,o[0])}return new Function(o[0])}return null}}(e);if(f(e))return function(e){const t=new RegExp(e.source);return t.lastIndex=e.lastIndex,t}(e);if(v(e))return function(e){return Object(Symbol.prototype.valueOf.call(e))}(e);const r=function(e){return new e.constructor}(e);if(t.get(e))return t.get(e);if(t.set(e,r),b(e))return e.forEach(((e,n)=>{r.set(n,x(e,t))})),r;if(y(e))return e.forEach((e=>{r.add(x(e,t))})),r;for(const n in e)r[n]=x(e[n],t);return r}function U(){var e;return"undefined"==typeof document||null==document.location?"":null===(e=document.location.href)||void 0===e?void 0:e.split("?")[0]}function L(e,t){const r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=[];let o;if(t=t||r.length,e)for(o=0;o<e;o++)n[o]=r[0|Math.random()*t];else{let e;for(n[8]="-",n[13]="-",n[18]="-",n[23]="-",n[14]="4",o=0;o<36;o++)n[o]||(e=0|16*Math.random(),n[o]=r[19==o?3&e|8:e])}return n.join("")}function C(e){const t=new Set,r=JSON.stringify(e,(function(e,r){return t.has(r)?"Circular":("object"==typeof r&&t.add(r),r)}));return t.clear(),r}function j(e){return e.replace(/\b(\w)(\w*)/g,(function(e,t,r){return`${t.toUpperCase()}${r}`}))}function N(e){return 100*Math.random()<=e}function q(e,t){if(clearTimeout(e.__timebar),!0!==t){const r={time:(t=t||{}).time||200,context:t.context||null,args:t.args};return new Promise((t=>{e.__timebar=setTimeout((function(){const n=e.apply(r.context,r.args);t(n)}),r.time)}))}}function B(){return Math.floor(Date.now()/1e3)}class A{constructor(){this.stack=[]}getCache(){return x(this.stack)}addCache(e){this.stack.push(e)}clearCache(){this.stack=[]}}class ${constructor(){this.cache=new Map}watch(e,t){const r=this.cache.get(e);r?this.cache.set(e,r.concat(t)):this.cache.set(e,[t])}notify(e,t){const r=this.cache.get(e);e&&r&&r.forEach((r=>{!function(e,t){try{e()}catch(e){t?t(e):console.error("err",e)}}((()=>{r(t)}),(t=>{console.error(`Subscribe.notify: 监听事件的回调函数发生错误\n\n                        eventName:${e}\n\n                        Name: ${function(e){return e&&"function"==typeof e&&e.name||"<anonymous>"}(r)}\n\n                        Error: ${t}`)}))}))}}class _{constructor(e){this.maxBreadcrumbs=10,this.beforePushBreadcrumb=null,this.stack=[],this.bindOptions(e)}push(e){if(h(this.beforePushBreadcrumb)){let t=null;return t=this.beforePushBreadcrumb.call(this,e),t?this.immediatePush(t):this.stack}return this.immediatePush(e)}immediatePush(e){return e.time||(e.time=B()),this.stack.length>=this.maxBreadcrumbs&&this.shift(),this.stack.push(e),this.stack.sort(((e,t)=>e.time-t.time)),this.stack}shift(){return void 0!==this.stack.shift()}clear(){this.stack=[]}getStack(){return this.stack}bindOptions(e){const{maxBreadcrumbs:t,beforePushBreadcrumb:r}=e;t&&m(t)&&(this.maxBreadcrumbs=t),r&&(this.beforePushBreadcrumb=r)}}class M extends class{constructor(){this.beforeAppAjaxSend=null,this.vue=null,this.sample=100}bindOptions(e){e.sample&&(this.sample=e.sample),e.vue&&(this.vue=e.vue),e.beforeAppAjaxSend&&h(e.beforeAppAjaxSend)&&(this.beforeAppAjaxSend=e.beforeAppAjaxSend)}}{constructor(e){super(),this.configReportXhr=null,super.bindOptions(e),this.bindOptions(e)}bindOptions(e){const{disabledPerformance:t,disabledBehavior:r,disabledError:n,useImgUpload:o,configReportXhr:i}=e;this.disabledPerformance=t||!1,this.disabledBehavior=r||!1,this.disabledError=n||!1,this.useImgUpload=o||!1,i&&h(i)&&(this.configReportXhr=i)}}function z(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}function X(){if(window.navigator.connection){const e=window.navigator.connection;return{effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt,saveData:e.saveData}}return null}class H extends class{constructor(){this.url="",this.appID="",this.userID="",this.appName="",this.cacheNum=50,this.beforeDataReport=null,this.timer=null,this.queue=new A,this.submitErrorUids=[]}bindOptions(e){this.appID=e.appID,this.url=e.url,e.appName&&(this.appName=e.appName),e.cacheNum&&(this.cacheNum=e.cacheNum),e.userID?this.userID=e.userID:this.userID=function(){let e="";return w?(e=localStorage.getItem("qmonitor_uuid"),e||(e=L(16),localStorage.setItem("qmonitor_uuid",e),e)):D?(e=wx.getStorageSync("qmonitor_uuid"),e||(e=L(16),wx.setStorageSync("qmonitor_uuid",e),e)):void 0}(),e.beforeDataReport&&(this.beforeDataReport=e.beforeDataReport),this.breadcrumb=new _(e),this.ignoreErrors=e.ignoreErrors,this.resourceLimitSize=e.resourceLimitSize||0,this.environment=e.environment}send(e,t=!1){var r;return function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))}(this,void 0,void 0,(function*(){if(e.mainData&&e.mainData.errorUid){if(this.submitErrorUids.indexOf(e.mainData.errorUid)>-1)return;if(g(this.ignoreErrors)&&this.ignoreErrors.length>0)for(const t of this.ignoreErrors)if(null===(r=e.mainData.msg)||void 0===r?void 0:r.includes(t))return;this.submitErrorUids.push(e.mainData.errorUid)}if("performance"===e.type&&"resource"===e.subType&&m(e.mainData.transferSize)&&e.mainData.transferSize<this.resourceLimitSize)return;let n=Object.assign({},this.formatReportData(e));if(!h(this.beforeDataReport)||(n=yield this.beforeDataReport(n),n)){if(!function(e){return g(e)||d(e)?0===e.length:e instanceof Map||e instanceof Set?0===e.size:!!l(e)&&0===Object.keys(e).length}(this.url))return this.sendTime(n,this.url,t);console.error("请设置上传 URL 地址")}}))}formatReportData(e){const t=Object.assign({time:B()},e);return"error"===e.type&&(t.breadcrumbData=this.breadcrumb.getStack()),t}addBaseInfo(e){const n=e;return{sdkVersion:r,sdkName:t,id:L(16),appID:this.appID,userID:this.userID,appName:this.appName,environment:this.environment,data:n}}sendTime(e,t,r){if(r){let r=this.addBaseInfo(e);return r=this.addOtherInfo(r),void this.report(r,t)}this.queue.addCache(e),clearTimeout(this.timer),this.timer=setTimeout((()=>{const e=this.queue.getCache();if(e&&e.length>=this.cacheNum){let r=this.addBaseInfo(e);r=this.addOtherInfo(r),this.report(r,t),this.queue.clearCache()}}),1e3)}}{constructor(e){super(),this.configReportXhr=null,this.useImgUpload=!1,super.bindOptions(e),this.bindOptions(e)}post(e,t){const r=new XMLHttpRequest;r.open("post",t),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.withCredentials=!0,this.configReportXhr&&h(this.configReportXhr)&&this.configReportXhr(r,e),r.send(C(e))}imgRequest(e,t){let r=new Image;const n=-1===t.indexOf("?")?"?":"&";r.src=`${t}${n}data=${encodeURIComponent(C(e))}`,r=null}beaconPost(e,t){R.navigator.sendBeacon.call(window.navigator,t,C(e))}report(e,t){let r=null;r=this.useImgUpload?this.imgRequest:R.navigator&&R.navigator.sendBeacon?this.beaconPost:this.post,R.requestIdleCallback?R.requestIdleCallback((()=>z(this,void 0,void 0,(function*(){yield r(e,t)})))):setTimeout((()=>z(this,void 0,void 0,(function*(){yield r(e,t)}))))}addOtherInfo(e){return Object.assign(Object.assign({},e),{networkInfo:X()})}bindOptions(e){this.useImgUpload=e.useImgUpload||!1,e.configReportXhr&&h(e.configReportXhr)&&(this.configReportXhr=e.configReportXhr)}}class F extends class{constructor(e){this.SDK_NAME=t,this.SDK_VERSION=r,this.options=e}use(e){const t=new $;e.forEach((e=>{this.isPluginsEnable(e.type)&&this.isPluginEnable(e.name)&&(e.monitor.call(this,t.notify.bind(t)),t.watch(e.name,((...t)=>{var r,n;const o=null===(r=e.transform)||void 0===r?void 0:r.apply(this,t);null===(n=e.consumer)||void 0===n||n.call(this,o)})))}))}getOptions(){return this.options}log(e,t=!1){const r=Object.assign({},e);r.pageURL||(r.pageURL=U()),r.type||(r.type="custom"),this.report.send(e,t)}}{constructor(e){super(e),this.options=new M(e),this.report=new H(e)}isPluginEnable(e){const t=`disabled${function(e){const t=e.split("-");let r="";return t.forEach((e=>{r+=j(e)})),r}(e)}`;return!this.options[t]}isPluginsEnable(e){const t=`disabled${j(e)}`;return!this.options[t]}}const J={name:"console-error",type:"error",monitor(e){R.console.error=(...t)=>{e("console-error",t)}},transform:e=>({type:"error",subType:"console-error",pageURL:U(),time:B(),mainData:{type:"",errorUid:i(`console-error-${e[0]}`),msg:e.join(";"),meta:void 0,stackTrace:void 0}}),consumer(e){this.report.breadcrumb.push({type:"Console",data:e.mainData,level:n.Error,time:e.time}),this.report.send(e,!0)}},K={name:"js-error",type:"error",monitor(e){O(R,"error",(t=>{t.target.localName||(t.preventDefault(),e("js-error",t))}),!0)},transform:e=>function(e){return{type:"error",subType:"js-error",pageURL:U(),time:B(),mainData:{type:e.error&&e.error.name||"UnKnown",errorUid:i(`js-error-${e.message}-${e.filename}`),msg:e.stack||e.message,meta:{file:e.filename,col:e.colno,row:e.lineno},stackTrace:{frames:c(e.error)}}}}(e),consumer(e){this.report.breadcrumb.push({type:"Code Error",data:x(e.mainData),level:n.Error,time:e.time}),this.report.send(e,!0)}},W={name:"resource-error",type:"error",monitor(e){O(R,"error",(t=>{t.target.localName&&(t.preventDefault(),e("resource-error",t))}),!0)},transform:e=>function(e){const t=e.src||e.href;return{type:"error",subType:"resource-error",pageURL:U(),time:B(),mainData:{type:"resource-error",errorUid:i(`resource-error-${e.src}-${e.tagName}`),msg:"资源地址: "+t,meta:{url:t,html:e.outerHTML,type:e.tagName},stackTrace:void 0}}}(e.target),consumer(e){this.report.breadcrumb.push({type:"Resource",data:e.mainData,level:n.Error,time:e.time}),this.report.send(e,!0)}};const G={name:"promise-error",type:"error",monitor(e){O(R,"unhandledrejection",(t=>{e("promise-error",t)}))},transform(e){const t=e.reason.stack||e.reason.message||e.reason,r=e.reason.name||"UnKnown";return{type:"error",subType:"promise-error",pageURL:U(),time:B(),mainData:{type:r,errorUid:i(`promise-error-${t}`),msg:t,meta:void 0,stackTrace:{frames:c(e.reason)}}}},consumer(e){this.report.breadcrumb.push({type:"Unhandledrejection",data:e.mainData,level:n.Error,time:e.time}),this.report.send(e,!0)}},V={name:"fetch",type:"error",monitor(e){Y.call(this,e)},transform:e=>te(e),consumer(e){re.call(this,e)}},Q=R.fetch;function Y(e){const{options:t}=this;"fetch"in R&&(R.fetch=(r,n={})=>{const o=B(),s=(n&&n.method||"GET").toUpperCase(),a={type:"error",subType:"fetch",pageURL:U(),time:o,mainData:{errorUid:i(`fetch-${r.split("?")[0]}`),request:{method:s,url:r,data:n&&n.body},response:{}}},c=new Headers(n.headers||{});return Object.assign(c,{setRequestHeader:c.set}),t.beforeAppAjaxSend&&t.beforeAppAjaxSend({url:r,method:s},c),Q(r,n).then((t=>{const r=t.clone(),n=B();return a.mainData=Object.assign(Object.assign({},a.mainData),{duration:n-o,response:{status:r.status}}),r.text().then((t=>{a.mainData.response.data=t,e("fetch",a)})),t})).catch((t=>{const r=B();throw a.mainData=Object.assign(Object.assign({},a.mainData),{duration:r-o,response:{status:0}}),e("fetch",a),t}))})}const Z={name:"xhr",type:"error",monitor(e){ee.call(this,e)},transform:e=>te(e),consumer(e){re.call(this,e)}};function ee(e){const{options:t}=this;if(!("XMLHttpRequest"in R))return;const r=XMLHttpRequest.prototype,n=r.open,o=r.send;r.open=function(...e){var t,r;this.url=null===(r=null===(t=e[1])||void 0===t?void 0:t.split("?"))||void 0===r?void 0:r[0],this.method=e[0],this.startTime=B(),this.httpCollect={type:"error",subType:"xhr",pageURL:U(),time:this.startTime,mainData:{request:{method:d(e[0])?e[0].toUpperCase():e[0],url:e[1]},response:{}}},n.apply(this,e)},r.send=function(...r){t.beforeAppAjaxSend&&t.beforeAppAjaxSend({method:this.method,url:this.url},this);const n=()=>{this.endTime=B(),this.duration=this.endTime-this.startTime;const{status:t,duration:r,response:o}=this;this.httpCollect.mainData.response={status:t,data:l(o)?JSON.stringify(o):o},this.httpCollect.mainData.duration=r,e("xhr",this.httpCollect),I(this,"loadend",n,!0)};O(this,"loadend",n,!0),o.apply(this,r)}}function te(e){let t="";const{request:{url:r},response:{status:n},duration:i}=e.mainData;return t=0===n?i<=o?"http请求失败，失败原因：跨域限制或域名不存在":"http请求失败，失败原因：超时":function(e){if(e<400)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}(n),t="ok"===t?t:`${t}: ${r}`,e.mainData.msg=t,e}function re(e){const t="fetch"===e.subType?"Fetch":"Xhr",{mainData:{response:{status:r}},time:o}=e,s=0===r||400===r||r>401;if(this.report.breadcrumb.push({type:t,data:e.mainData,level:n.Info,time:o}),s){this.report.breadcrumb.push({type:t,data:e.mainData,level:n.Error,time:o});const{mainData:{request:{url:r}}}=e;e.mainData.errorUid=i(`xhr-${r.split("?")[0]}`),this.report.send(e,!0)}}const ne={name:"cumulative-layout-shift",type:"performance",monitor(e){if(!E())return;let t=0,r=[];const n={type:"performance",subType:"cumulative-layout-shift",pageURL:"",mainData:{value:0}};function o(o){n.pageURL=U();for(const i of o.getEntries()){const o=i;if(!o.hadRecentInput){const s=r[0],a=r[r.length-1];t&&i.startTime-a.startTime<1e3&&i.startTime-s.startTime<5e3?(t+=o.value,r.push(oe(i))):(t=o.value,r=[oe(i)]),t>n.mainData.value&&(n.mainData={entry:o,value:t,entries:r},t>.1&&(n.mainData.scroll=t>.25?"poor":"need improvement",e("cumulative-layout-shift",x(n))))}}}const i=new PerformanceObserver(o);i.observe({type:"layout-shift",buffered:!0}),i&&function(e,t,r=!1){const n=o=>{"pagehide"!==o.type&&"hidden"!==document.visibilityState||(t(o),r&&(I(e,"visibilitychange",n,!0),I(e,"pagehide",n,!0)))};O(e,"visibilitychange",n,!0),O(e,"pagehide",n,!0)}(R,(()=>{i.takeRecords().map(o)}))},transform:e=>e,consumer(e){this.report.send(e)}};function oe(e){const t=e.toJSON();return delete t.duration,delete t.sources,t}const ie={name:"first-input-delay",type:"performance",monitor(e){if(!T)return;const t=new PerformanceObserver((function(r){t&&t.disconnect();for(const t of r.getEntries()){const r={type:"performance",subType:"first-input-delay",pageURL:U(),mainData:Object.assign({},t.toJSON())};e("first-input-delay",r)}}));t.observe({type:"first-input",buffered:!0})},transform:e=>e,consumer(e){this.report.send(e)}};let se=!1;const ae={name:"largest-contentful-paint",type:"performance",monitor(e){if(!T)return void(se=!0);const t=new PerformanceObserver((function(r){se=!0,t&&t.disconnect();for(const t of r.getEntries()){const r={type:"performance",subType:"largest-contentful-paint",pageURL:U(),mainData:Object.assign({},t.toJSON())};e("largest-contentful-paint",r)}}));t.observe({type:"largest-contentful-paint",buffered:!0})},transform:e=>e,consumer(e){this.report.send(e)}};let ce,ue=!1;P(R,(()=>{ue=!0}));const pe=[],le={name:"first-meaning-paint",type:"performance",monitor(e){if(!MutationObserver)return;const t=window.requestAnimationFrame?requestAnimationFrame:setTimeout,r=["STYLE","SCRIPT","LINK","META"];ce=new MutationObserver((n=>{de(e);const o={startTime:0,children:[]};t((()=>{o.startTime=performance.now()}));for(const e of n)if(e.addedNodes.length)for(const t of[...e.addedNodes])1!==t.nodeType||r.includes(t.tagName)||fe(t,o.children)||o.children.push(t);o.children.length&&pe.push(o)})),ce.observe(document,{childList:!0,subtree:!0})},transform:e=>e,consumer(e){this.report.send(e)}};let me=null;function de(e){clearTimeout(me),me=setTimeout((()=>{if(se&&ue){ce&&ce.disconnect();const t={type:"performance",subType:"first-meaning-paint",pageURL:U(),mainData:{startTime:he()}};e("first-meaning-paint",t)}else de(e)}),500)}function he(){let e=0;return pe.forEach((t=>{for(const r of t.children)if(ge(r)&&t.startTime>e&&be(r)){e=t.startTime;break}})),performance.getEntriesByType("resource").forEach((t=>{"img"===t.initiatorType&&t.fetchStart<e&&t.responseEnd>e&&(e=t.responseEnd)})),e}function fe(e,t){return!(!e||e===document.documentElement)&&(!!t.includes(e)||fe(e.parentElement,t))}function ge(e){const t=window.innerWidth,r=window.innerHeight,n=e.getBoundingClientRect();return n.left>=0&&n.left<t&&n.top>=0&&n.top<r}function be(e){return"none"!==window.getComputedStyle(e).display&&!("IMG"===e.tagName&&e.width<2&&e.height<2)}const ye={name:"first-paint",type:"performance",monitor(e){if(!T)return;const t=new PerformanceObserver((function(r){for(const n of r.getEntries()){"first-contentful-paint"===n.name&&t.disconnect();const r={type:"performance",subType:n.name,pageURL:U(),mainData:Object.assign({},n.toJSON())};e("first-paint",r)}}));t.observe({type:"paint",buffered:!0})},transform:e=>e,consumer(e){this.report.send(e)}},ve={name:"resource",type:"performance",monitor(e){T&&P(R,(()=>De.call(this,"resource",e)))},transform(e){const t={type:"performance",subType:"resource",mainData:{},pageURL:""};return t.mainData={name:e.name.split("/")[e.name.split("/").length-1],sourceType:e.initiatorType,ttfb:e.responseStart,transferSize:e.transferSize,protocol:e.nextHopProtocol,encodedBodySize:e.encodedBodySize,decodedBodySize:e.decodedBodySize,resourceRatio:e.decodedBodySize/e.encodedBodySize||1,isCache:Re(e),startTime:performance.now(),redirect:e.redirectEnd-e.redirectStart,dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,request:e.responseStart-e.requestStart,response:e.responseEnd-e.responseStart,duration:e.duration},t},consumer(e){this.report.send(e)}},we={name:"navigation",type:"performance",monitor(e){T&&P(R,(()=>De.call(this,"navigation",e)))},transform(e){const t={type:"performance",subType:"navigation",mainData:{},pageURL:""};return t.pageURL=U(),t.mainData={tti:e.domComplete-e.fetchStart,domReady:e.domContentLoadedEventEnd-e.fetchStart,load:e.loadEventEnd-e.fetchStart,firstByte:e.responseStart-e.domainLookupStart,dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,ssl:e.secureConnectionStart?e.connectEnd-e.secureConnectionStart:0,ttfb:e.responseStart-e.requestStart,trans:e.responseEnd-e.responseStart,domParse:e.domInteractive-e.responseEnd,res:e.loadEventStart-e.domContentLoadedEventEnd},t},consumer(e){this.report.send(e)}};let Se=!1;function De(e,t){const r=new PerformanceObserver((function(n){for(const i of n.getEntries()){const n=i;if("navigation"===e){if(Se)return;r&&r.disconnect(),Se=!0}!n.nextHopProtocol&&"navigation"!==e||(o=n.initiatorType,Ee.includes(o))||t(e,n)}var o}));r.observe({type:e,buffered:!0})}const Ee=["fetch","xmlhttprequest","beacon"];function Re(e){return 0===e.transferSize||0!==e.transferSize&&0===e.encodedBodySize}/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&Ee.push("other");const Te={name:"click",type:"behavior",monitor(e){"document"in R&&(O(R.document,"click",(function(t){q(e,{args:["click",{category:"click",data:this,e:t}]})}),!0),O(R.document,"touchstart",(function(t){q(e,{args:["click",{category:"click",data:this,e:t}]})}),!0))},transform(e){const{data:t,e:r}=e,n=function(e){const t=e.tagName.toLowerCase();if("body"===t)return null;let r=e.classList.value;return r=""!==r?` class="${r}"`:"",`<${t}${e.id?` id="${e.id}"`:""}${""!==r?r:""}>${e.innerText}</${t}>`}(t.activeElement);if(n){const e={type:"behavior",subType:"click",pageURL:U(),time:B(),mainData:{startTime:r.timeStamp,district:{},html:n}},t=r.target.getBoundingClientRect();return t&&(e.mainData.district={top:t.top,left:t.left}),e}return null},consumer(e){e&&this.report.breadcrumb.push({type:"UI.Click",data:e.mainData,level:n.Info,time:e.time})}},Oe={name:"hash-route",type:"behavior",monitor(e){(function(e,t){return Object.prototype.hasOwnProperty.call(e,t)})(R,"onpopstate")||O(R,"hashchange",(function(t){const{oldURL:r,newURL:n}=t;e("hash-route",{from:r,to:n})}))},transform:e=>Ie(e,"hash-route"),consumer(e){Pe.call(this,e)}};function Ie(e,t){const{from:r,to:n}=e;return{type:"behavior",subType:t,pageURL:U(),time:B(),mainData:{from:r,to:n}}}function Pe(e){e.mainData.from!==e.mainData.to&&this.report.breadcrumb.push({type:"Route",data:e.mainData,level:n.Info,time:e.time})}const ke={name:"pv",type:"behavior",monitor(e){e("pv","")},transform(){const e={type:"behavior",subType:"pv",pageURL:U(),mainData:{}};return"document"in R&&(e.mainData.referrer=document.referrer),e},consumer(e){this.report.send(e)}},xe={name:"history-route",type:"behavior",monitor(e){let t;if(!function(){const e=R.chrome,t=e&&e.app&&e.app.runtime,r="history"in R&&!!R.history.pushState&&!!R.history.replaceState;return!t&&r}())return;const r=R.onpopstate;function n(r){return function(...n){const o=n.length>2?n[2]:void 0;if(o){const r=t,n=String(o);t=n,e("history-route",{from:r,to:n})}return r.apply(this,n)}}R.onpopstate=function(...n){const o=U(),i=t;t=o,e("history-route",{from:i,to:o}),r&&r.apply(this,n)},R.history.pushState=n(R.history.pushState),R.history.replaceState=n(R.history.replaceState)},transform:e=>Ie(e,"history-route"),consumer(e){Pe.call(this,e)}};const Ue=function(e={},t=[]){const r=new F(e),n=r.getOptions().sample;let o=[J,K,W,G,Z,V,Te,Oe,ke,xe];if(N(n)){o=[...o,ne,ie,le,ye,ae,ve,we];k(R,(()=>{const e=r.report.queue.getCache();if(e&&e.length>0){let t=r.report.addBaseInfo(e);t=r.report.addOtherInfo(t),r.report.post(t,r.report.url),r.report.queue.clearCache()}}))}return r.use([...o,...t]),r},Le=function(e={},t){var r;const n=new F(e),o=n.getOptions().sample,i=t.imme||[];let s=[];if(N(o)&&(null===(r=t.sample)||void 0===r?void 0:r.length)){s=t.sample||[];k(R,(()=>{const e=n.report.queue.getCache();if(e&&e.length>0){let t=n.report.addBaseInfo(e);t=n.report.addOtherInfo(t),n.report.post(t,n.report.url),n.report.queue.clearCache()}}))}return n.use([...i,...s]),n},Ce=[J,K,G,Z,V,W],je=[ne,ie,le,ye,ae,ve,we],Ne=[Te,Oe,ke,xe];return e.BrowserClient=F,e.behaviorPlugins=Ne,e.clickPlugin=Te,e.clsPlugin=ne,e.consoleErrorPlugin=J,e.errorPlugins=Ce,e.fetchPlugin=V,e.fidPlugin=ie,e.fmpPlugin=le,e.fpPlugin=ye,e.hashRoutePlugin=Oe,e.historyRoutePlugin=xe,e.init=Ue,e.jsErrorPlugin=K,e.lcpPlugin=ae,e.navigationPlugin=we,e.perfrormancePlugins=je,e.promiseErrorPlugin=G,e.pvPlugin=ke,e.rawInit=Le,e.resourceErrorPlugin=W,e.resourcePlugin=ve,e.xhrPlugin=Z,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
